<% presenter = present(@audit) %>

<h2 class="govuk-heading-l">Audit Log</h2>

<dl class="govuk-summary-list">
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">
      Action
    </dt>
    <dd class="govuk-summary-list__value">
      <%= @audit.action %>
    </dd>
  </div>
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">
      Record
    </dt>
    <dd class="govuk-summary-list__value">
      <%= presenter.name %>
    </dd>
  </div>
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">
      Changes
    </dt>
    <dd class="govuk-summary-list__value">
      <pre><%= JSON.pretty_generate(@audit.audited_changes) %></pre>
    </dd>
  </div>

  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">
      User
    </dt>
    <dd class="govuk-summary-list__value">
      <%= @audit.email || "System" %>
    </dd>
  </div>
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">
      Datetime
    </dt>
    <dd class="govuk-summary-list__value">
      <%= @audit.created_at.to_s(:long) %>
    </dd>
  </div>
</dl>
